<!DOCTYPE html>
<html>

<head>
  <title>Boba Drops</title>
  <!-- Meta -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Favicon -->
  <link rel="icon" href="favicon.png">
  <!-- Styles -->
  <link rel="stylesheet" type="text/css" href="styles.css">
  <!-- Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Fraunces:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap"
    rel="stylesheet">
  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
  <a class="banner" href="https://hackclub.com/">
    <img src="https://contribute.hackclub.com/images/flag-orpheus-top.png"
      alt="Dinosaur arm holding flag that reads 'Hack Club'">
  </a>

  <a class="top-button" href="index.html">Go back</a>

  <div id="header-gallery">
    <h1>Gallery</h1>
    <p>Check out created websites and track your submission!</p>

    <div class="status-list">
      <a id="status-all" href="gallery.html?status=All">All</a>
      <a id="status-approved" href="gallery.html?status=Approved">Approved</a>
      <a id="status-pending" href="gallery.html?status=Pending">Pending</a>
      <a id="status-rejected" href="gallery.html?status=Rejected">Rejected</a>
    </div>

    <div class="event-code-form" id="event-code-search">
      <form>
        <input class="event-code-input" type="text" id="event-input" placeholder="Event Code" />
        <button class="event-code-button" type="submit">Search</button>
      </form>
    </div>
  </div>

  <div id="content">
    <div class="container" id="submissions-content">
      <div id="grid-gallery">
        {{GALLERY_CONTENT}}
      </div>
    </div>
  </div>

  <div id="footer">
    <p style="display: flex; gap: 4px; justify-content: center;">Made with <img src="images/boba-parrot.gif" alt="boba"
        title="A parrot with boba" height="20px" /> by <a href="https://hackclub.com">Hack Club</a>.</p>
  </div>
  
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const statusQuery = urlParams.get("status");
    const eventCode = urlParams.get("eventCode") || "";
    
    document.getElementById("event-input").value = eventCode;
    
    if (["All", "Approved", "Pending", "Rejected"].includes(statusQuery)) {
      document.getElementById(`status-${statusQuery.toLowerCase()}`).classList.add("active");
    } else {
      document.getElementById("status-all").classList.add("active");
    }
    
    const form = document.getElementById("event-code-search");
    form.addEventListener("submit", (e) => {
      e.preventDefault();
      const newEventCode = document.getElementById("event-input").value.trim();
      const currentStatus = statusQuery || "All";
      window.location.href = `?eventCode=${newEventCode}&status=${currentStatus}`;
    });
    
    function filterSubmissions() {
      const statusFilter = statusQuery || "All";
      const eventFilter = eventCode;
      const submissions = document.querySelectorAll('.grid-submission');
      
      submissions.forEach(submission => {
        let showSubmission = true;
        
        if (statusFilter !== "All") {
          const statusElement = submission.querySelector('.status');
          if (!statusElement.classList.contains(statusFilter.toLowerCase())) {
            showSubmission = false;
          }
        }
        
        if (eventFilter && showSubmission) {
          const eventCodeElement = submission.getAttribute('data-event-code');
          if (eventCodeElement !== eventFilter) {
            showSubmission = false;
          }
        }
        
        submission.style.display = showSubmission ? 'block' : 'none';
      });
    }
    
    filterSubmissions();
  </script>
</body>

</html>